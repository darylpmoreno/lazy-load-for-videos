var $lly=jQuery.noConflict(),classPreviewYoutube="preview-youtube",classBranding="lazyload-info-icon",classBrandingDot="."+classBranding,videoratio=.5625,thumbnailurl="",$lly_o,setOptionsYoutube=function(l){$lly_o=$lly.extend({theme:"dark",colour:"red",controls:!0,relations:!0,buttonstyle:"",preroll:"",postroll:"",videoseo:!1,responsive:!0,thumbnailquality:"0"},l)};$lly(document).ready(function(){var l=function(){$lly("a.lazy-load-youtube").each(function(l){var t=this,o=$lly(this).attr("href").split("/embed/")[1];o||(o=$lly(this).attr("href").split("://youtu.be/")[1]),o||(o=$lly(this).attr("href").split("v=")[1].replace(/\&/,"?"));var i=function(){return o.split("?")[0].split("#")[0]},a=i(),n=function(){var l="";return $lly_o.preroll!==l&&void 0!==$lly_o.preroll?$lly_o.preroll:i()},r=n(),s=o.match(/[#&]t=(\d+)s/);s?s=s[1]:(s=o.match(/[#&]t=(\d+)m(\d+)s/),s?s=60*parseInt(s[1])+parseInt(s[2]):(s=o.match(/[?&]start=(\d+)/),s&&(s=s[1])));var y="//www.youtube.com/embed/"+n(),c=function(){return'<a class="'+classBranding+'" href="http://kevinw.de/lazy-load-videos/" title="Lazy Load for Videos by Kevin Weber" target="_blank">i</a>'},d=function(){if($lly_o.displayBranding!==!1){var l=$lly(t),e=$lly(c());l.before(e)}};d();var u=function(){return void 0!==$lly(t).attr("video-title")?$lly(t).attr("video-title"):""!==$lly(this).html()&&void 0!==$lly(this).html()?$lly(this).html():""},p=function(l){return"//www.youtube.com/watch?v="+l},h=function(l){var t=parseInt(l.css("width"))-4;return t},v=function(l){var t=0;if($lly_o.responsive===!1)t=parseInt(l.css("height"))-4;else{var e=h(l);t=Math.round(e*videoratio)}return t};o=o.split("#")[0],s&&-1===o.indexOf("start=")&&(o+=(-1===o.indexOf("?")?"?":"&")+"start="+s);var f="";$lly_o.videoseo===!0&&(f=' itemprop="name"'),$lly(this).html(-1!==o.indexOf("showinfo=0")?"":'<div class="lazy-load-youtube-info"><span class="titletext youtube"'+f+">"+u()+"</span></div>"),$lly(this).prepend('<div style="height:'+v($lly(this))+"px;width:"+h($lly(this))+'px;" class="lazy-load-youtube-div"></div>').addClass($lly_o.buttonstyle);var m=function(l){var t="//i2.ytimg.com/vi/"+l+"/"+$lly_o.thumbnailquality+".jpg";thumbnailurl=t};m(a);var b=function(){return thumbnailurl};$lly(this).css("background","#000 url("+b()+") center center no-repeat"),$lly_o.videoseo===!0&&($lly(t).append('<meta itemprop="contentLocation" content="'+p(a)+'" />'),$lly(t).append('<meta itemprop="embedUrl" content="'+y+'" />'),$lly(this).append('<meta itemprop="thumbnail" content="'+b()+'" />'),$lly.getJSON("http://gdata.youtube.com/feeds/api/videos/"+a+"?v=2&alt=jsonc&callback=?",function(l){$lly(t).append('<meta itemprop="datePublished" content="'+l.data.uploaded+'" />'),$lly(t).append('<meta itemprop="duration" content="'+l.data.duration+'" />'),$lly(t).append('<meta itemprop="aggregateRating" content="'+l.data.rating+'" />')})),$lly(this).attr("id",a+l),$lly(this).attr("href",p(a)+(s?"#t="+s+"s":""));var g="";$lly_o.theme!==g&&void 0!==$lly_o.theme&&"dark"!==$lly_o.theme&&(g="&theme="+$lly_o.theme);var _="";$lly_o.colour!==_&&void 0!==$lly_o.colour&&"red"!==$lly_o.colour&&(_="&color="+$lly_o.colour);var w="";$lly_o.relations||(w="&rel=0");var z="";$lly_o.controls||(z="&controls=0"),r=r!==a?a+",":"";var x="";$lly_o.postroll!==x&&void 0!==$lly_o.postroll&&(x=$lly_o.postroll);var B="&playlist="+r+x;y+=(-1===y.indexOf("?")?"?":"&")+"autoplay=1"+g+_+z+w+B;var k='<iframe width="'+parseInt($lly(this).css("width"))+'" height="'+parseInt($lly(this).css("height"))+'" style="vertical-align:top;" src="'+y+'" frameborder="0" allowfullscreen></iframe>';$lly(this).on("click",function(){return I(this),O(this),$lly("#"+a+l).replaceWith(k),"function"==typeof e.resize&&$lly_o.responsive===!0&&e.resize(),!1});var I=function(l){$lly(l).removeClass(classPreviewYoutube)},O=function(l){$lly(l).prev(classBrandingDot).remove()}})};$lly(document).ready(l()).ajaxStop(function(){l()});var t=function(){if($lly_o.displayBranding!==!1){$lly(classBrandingDot).css({display:"block",visibility:"visible"});var l=$lly(classBrandingDot).css("color");l=l.replace(/\s/g,""),l=l.toLowerCase(),("transparent"===l||"rgba(0,0,0,0)"===l)&&$lly(classBrandingDot).css("cssText","color: white!important;")}};t(),$lly.fn.bindFirst=function(l,t){var e=$lly(this);e.unbind(l,t),e.bind(l,t);var o=$lly._data(e[0]).events,i=o[l];i.unshift(i.pop()),o[l]=i};var e={config:{container:$lly(".container-lazyload"),selector:"object, embed, iframe, .preview-lazyload, .lazy-load-youtube-div, .lazy-load-vimeo-div"},init:function(l){e.config.container.length>0&&($lly(window).on("resize",e.resize),$lly(window).bindFirst("load",function(){e.resize()}))},resize:function(){$lly(e.config.selector,e.config.container).each(function(){var l=$lly(this),t=l.parent().width(),e=Math.round(t*videoratio);l.attr("height",e),l.attr("width",t),l.css({height:e,width:t})})}};"function"==typeof e.init&&$lly_o.responsive===!0&&e.init()});