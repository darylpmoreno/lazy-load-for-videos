function showThumb(t){jQuery("#"+t[0].id).css("background","#000 url("+t[0].thumbnail_large+") center center no-repeat"),lazyload_video_settings.vimeo.show_title&&jQuery("#"+t[0].id).children().children(".titletext.vimeo").text(t[0].title)}!function(t,$,e){function n(t,e,n){this.testImplement=t,this.testParams=e,this.repititions=n||1e4,this.average=0}var i="preview-youtube",o="lazyload-info-icon",a="."+o,r=.5625,l="";t.init=function(t){c(t),$(document).ready(d()).ajaxStop(function(){d()}),"function"==typeof u.init&&s.responsive===!0&&u.init(),"function"==typeof s.callback&&s.callback()};var s,c=function(t){s=$.extend({theme:"dark",colour:"red",controls:!0,loadpolicy:!0,showinfo:!0,relations:!0,buttonstyle:"",preroll:"",postroll:"",videoseo:!1,responsive:!0,thumbnailquality:"0",displaybranding:!1,callback:null},t)},d=function(){$("a.lazy-load-youtube").each(function(t){var n=$(this),c=n.attr("href"),d,p="";!function L(){d=c.split("/embed/")[1],d||(d=c.split("://youtu.be/")[1]),d||(d=c.split("v=")[1].replace(/\&/,"?"))}();var f=d.split("?")[0].split("#")[0];!function O(){p=s.preroll!==e&&s.preroll!==p?s.preroll:d}();var h="//www.youtube.com/embed/"+p,v=function(){return'<a class="'+o+'" href="http://kevinw.de/lazy-load-videos/" title="Lazy Load for Videos by Kevin Weber" target="_blank">i</a>'},m=function(){if(s.displaybranding===!0&&0===n.siblings(a).length){var t=n,e=$(v());t.before(e)}};m();var y=function(){return n.attr("video-title")!==e?n.attr("video-title"):n.html()!==e&&""!==n.html()?n.html():""},b=function(t){return"//www.youtube.com/watch?v="+t},g=function(t){var e=parseInt(t.css("width"))-4;return e},w=function(t){var e=0;if(s.responsive===!1)e=parseInt(t.css("height"))-4;else{var n=g(t);e=Math.round(n*r)}return e},z=d.match(/[#&]t=(\d+)s/);z?z=z[1]:(z=d.match(/[#&]t=(\d+)m(\d+)s/),z?z=60*parseInt(z[1])+parseInt(z[2]):(z=d.match(/[?&]start=(\d+)/),z&&(z=z[1]))),d=d.split("#")[0],z&&-1===d.indexOf("start=")&&(d+=(-1===d.indexOf("?")?"?":"&")+"start="+z);var k="";s.videoseo===!0&&(k=' itemprop="name"'),n.html(-1!==d.indexOf("showinfo=0")?"":'<div class="lazy-load-youtube-info"><span class="titletext youtube"'+k+">"+y()+"</span></div>"),n.prepend('<div style="height:'+w(n)+"px;width:"+g(n)+'px;" class="lazy-load-youtube-div"></div>').addClass(s.buttonstyle);var x=function(t){var e="//i2.ytimg.com/vi/"+t+"/"+s.thumbnailquality+".jpg";l=e};x(f);var _=function(){return l},j=function(t){var e=_(),n=$('<img style="display:none" src="'+e+'"/>');n.load(function(){120===n.width()&&(e=e.replace("maxresdefault","0")),t.css("background","#000 url("+e+") center center no-repeat"),n.remove()}),$("body").append(n)};j(n),s.videoseo===!0&&(n.append('<meta itemprop="contentLocation" content="'+b(f)+'" />'),n.append('<meta itemprop="embedUrl" content="'+h+'" />'),n.append('<meta itemprop="thumbnail" content="'+_()+'" />'),$.getJSON("http://gdata.youtube.com/feeds/api/videos/"+f+"?v=2&alt=jsonc&callback=?",function(t){n.append('<meta itemprop="datePublished" content="'+t.data.uploaded+'" />'),n.append('<meta itemprop="duration" content="'+t.data.duration+'" />'),n.append('<meta itemprop="aggregateRating" content="'+t.data.rating+'" />')})),n.attr("id",f+t),n.attr("href",b(f)+(z?"#t="+z+"s":"")),function P(){var t="",n="",i="",o="",a,r,l,c;s.theme!==e&&s.theme!==t&&"dark"!==s.theme&&(t="&theme="+s.theme),s.colour!==e&&s.colour!==n&&"red"!==s.colour&&(n="&color="+s.colour),a=s.showinfo?"":"&showinfo=0",r=s.relations?"":"&rel=0",l=s.controls?"":"&controls=0",c=s.loadpolicy?"":"&iv_load_policy=3",p=p!==f?f+",":"",s.postroll!==e&&s.postroll!==i&&(i=s.postroll),(""!==p||""!==i)&&(o="&playlist="+p+i),h+=(-1===h.indexOf("?")?"?":"&")+"autoplay=1"+t+n+l+c+a+r+o}();var I='<iframe width="'+parseInt(n.css("width"))+'" height="'+parseInt(n.css("height"))+'" style="vertical-align:top;" src="'+h+'" frameborder="0" allowfullscreen></iframe>';$(this).on("click",function(){return S(this),F(this),$("#"+f+t).replaceWith(I),"function"==typeof u.resize&&s.responsive===!0&&u.resize(),!1});var S=function(t){$(t).removeClass(i)},F=function(t){$(t).prev(a).remove()}})};$.fn.bindFirst=function(t,e){var n=$(this);n.unbind(t,e),n.bind(t,e);var i=$._data(n[0]).events,o=i[t];o.unshift(o.pop()),i[t]=o};var u={config:{container:$(".container-lazyload"),selector:"object, embed, iframe, .preview-lazyload, .lazy-load-youtube-div, .lazy-load-vimeo-div"},init:function(){u.config.container.length>0&&($(window).on("resize",u.resize),$(window).bindFirst("load",function(){u.resize()}),$(window).on("load",function(){u.resize()}))},resize:function(){$(u.config.selector,u.config.container).each(function(){var t=$(this),e=t.parent().width(),n=Math.round(e*r);t.attr("height",n),t.attr("width",e),t.css({height:n,width:e})})}};$(function(){t.init(lazyload_video_settings.youtube)}),n.prototype={startTest:function(){for(var t,e,n=0,i=0,o=this.repititions;o>i;i++)t=+new Date,this.testImplement(this.testParams),e=+new Date,n+=e-t;return this.average=n/this.repititions,console.log("Average execution across "+this.repititions+": "+this.average)}}}(window.lazyload_youtube=window.lazyload_youtube||{},jQuery),function(t,$,e){function n(){y(),u(),p()}var i="preview-vimeo",o="."+i,a="lazyload-info-icon",r="."+a,l=.5625;t.init=function(t){c(t),$(document).ready(n()).ajaxStop(function(){n()}),"function"==typeof k.init&&s.responsive===!0&&k.init(),"function"==typeof s.callback&&s.callback()};var s,c=function(t){s=$.extend({buttonstyle:"",playercolour:"",videoseo:!1,responsive:!0,displayBranding:!1,callback:null},t)},d=function(){return'<a class="'+a+'" href="http://kevinw.de/lazy-load-videos/" title="Lazy Load for Videos by Kevin Weber" target="_blank">i</a>'},u=function(){if(s.displayBranding===!0&&0===$(o).siblings(r).length){var t=$(o),e=$(d());t.before(e)}},p=function(){$(o).on("click",function(){var t=z(this);f(this),h(this);var e="";s.playercolour!==e&&(s.playercolour=m(s.playercolour),e="&color="+s.playercolour),$(this).html('<iframe src="'+v(t)+"?autoplay=1"+e+'" style="height:'+parseInt($("#"+t).css("height"))+'px;width:100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen autoPlay allowFullScreen></iframe>'),"function"==typeof k.resize&&s.responsive===!0&&k.resize()})},f=function(t){$(t).removeClass(i)},h=function(t){$(t).prev(r).remove()},v=function(t){return"//player.vimeo.com/video/"+t},m=function(t){var e=t.toString().replace(/[.#]/g,"");return e},y=function(){$(o).each(function(){var t=z(this);$(this).empty(),b(t)})},b=function(t){var e=w(t)+".json?callback=showThumb",n=document.createElement("script");n.type="text/javascript",n.src=e;var i="";s.videoseo===!0&&(i=' itemprop="name"'),$("#"+t).prepend(n).prepend('<div style="height:'+parseInt($("#"+t).css("height"))+"px;width:"+parseInt($("#"+t).css("width"))+'px;" class="lazy-load-vimeo-div"><span class="titletext vimeo"'+i+"></span></div>").addClass(s.buttonstyle),g(t)},g=function(t){s.videoseo===!0&&$.getJSON(w(t)+"?callback=?",{format:"json"},function(e){$("#"+t).append('<meta itemprop="contentLocation" content="'+e[0].url+'" />'),$("#"+t).append('<meta itemprop="embedUrl" content="'+v(t)+'" />'),$("#"+t).append('<meta itemprop="thumbnail" content="'+e[0].thumbnail_large+'" />'),$("#"+t).append('<meta itemprop="datePublished" content="'+e[0].upload_date+'" />'),$("#"+t).append('<meta itemprop="duration" content="'+e[0].duration+'" />'),$("#"+t).append('<meta itemprop="aggregateRating" content="'+e.data.rating+'" />')})},w=function(t){return"//vimeo.com/api/v2/video/"+t+".json"},z=function(t){var e=$(t).attr("id");return e};$.fn.bindFirst=function(t,e){var n=$(this);n.unbind(t,e),n.bind(t,e);var i=$._data(n[0]).events,o=i[t];o.unshift(o.pop()),i[t]=o};var k={config:{container:$(".container-lazyload"),selector:"object, embed, iframe, .preview-lazyload, .lazy-load-youtube-div, .lazy-load-vimeo-div"},init:function(){k.config.container.length>0&&($(window).on("resize",k.resize),$(window).bindFirst("load",function(){k.resize()}),$(window).on("load",function(){k.resize()}))},resize:function(){$(k.config.selector,k.config.container).each(function(){var t=$(this),e=t.parent().width(),n=Math.round(e*l);t.attr("height",n),t.attr("width",e),t.css({height:n,width:e})})}};$(function(){t.init(lazyload_video_settings.vimeo)})}(window.lazyload_vimeo=window.lazyload_vimeo||{},jQuery);