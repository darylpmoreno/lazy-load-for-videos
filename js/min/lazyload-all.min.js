function showThumb(e){jQuery("#"+e[0].id).css("background","#000 url("+e[0].thumbnail_large+") center center no-repeat"),lazyload_video_settings.vimeo.show_title&&jQuery("#"+e[0].id).children().children(".titletext.vimeo").text(e[0].title)}!function(e,$,t){var n="preview-youtube",o="lazyload-info-icon",i="."+o,a=.5625,r="";e.init=function(e){c(e),$(document).ready(s()).ajaxStop(function(){s()}),"function"==typeof d.init&&l.responsive===!0&&d.init(),"function"==typeof l.callback&&l.callback()};var l,c=function(e){l=$.extend({theme:"dark",colour:"red",controls:!0,loadpolicy:!0,showinfo:!0,relations:!0,buttonstyle:"",preroll:"",postroll:"",videoseo:!1,responsive:!0,thumbnailquality:"0",displaybranding:!1,callback:null},e)},s=function(){$("a.lazy-load-youtube").each(function(e){var c=$(this),s=c.attr("href"),u,p="";!function M(){u=s.split("/embed/")[1],u||(u=s.split("://youtu.be/")[1]),u||(u=s.split("v=")[1].replace(/\&/,"?"))}();var f=u.split("?")[0].split("#")[0];!function P(){p=l.preroll!==t&&l.preroll!==p?l.preroll:u}();var v="//www.youtube.com/embed/"+p,h=function(){return'<a class="'+o+'" href="//kevinw.de/lazy-load-videos/" title="Lazy Load for Videos by Kevin Weber" target="_blank">i</a>'},m=function(){if(l.displaybranding===!0&&0===c.siblings(i).length){var e=c,t=$(h());e.before(t)}};m();var y=function(){return c.attr("video-title")!==t?c.attr("video-title"):c.html()!==t&&""!==c.html()?c.html():""},b=function(e){return"//www.youtube.com/watch?v="+e},g=function(e){var t=parseInt(e.css("width"))-4;return t},w=function(e){var t=0;if(l.responsive===!1)t=parseInt(e.css("height"))-4;else{var n=g(e);t=Math.round(n*a)}return t},z=0,k=[3600,60,1],_=u.match(/[#&?]t=(?:(\d+)(?:h))?(?:(\d+)(?:m))?(?:(\d+)(?:s))?/);if(_)for(var x=1;x<_.length;x++)"undefined"!=typeof _[x]&&(z+=parseInt(_[x])*k[x-1]);0===z&&(_=u.match(/[#&?](?:t|start)=(\d+)/),_&&(z=_[1])),u=u.split("#")[0];var j="";z&&0!==z&&-1===u.indexOf("start=")&&(j=(-1===u.indexOf("?")?"?":"&")+"start="+z);var I="";l.videoseo===!0&&(I=' itemprop="name"'),c.html(-1!==u.indexOf("showinfo=0")?"":'<div class="lazy-load-youtube-info"><span class="titletext youtube"'+I+">"+y()+"</span></div>"),c.prepend('<div style="height:'+w(c)+"px;width:"+g(c)+'px;" class="lazy-load-youtube-div"></div>').addClass(l.buttonstyle);var S=function(e){var t="//i2.ytimg.com/vi/"+e+"/"+l.thumbnailquality+".jpg";r=t};S(f);var F=function(){return r},L=function(e){var t=F(),n=$('<img style="display:none" src="'+t+'"/>');n.load(function(){console.log(t),120===n.width()&&(t=t.replace("maxresdefault","0")),"none"===e.css("background-image")&&e.css("background","#000 url("+t+") center center no-repeat"),n.remove()}),$("body").append(n)};L(c),l.videoseo===!0&&(c.append('<meta itemprop="contentLocation" content="'+b(f)+'" />'),c.append('<meta itemprop="embedUrl" content="'+v+'" />'),c.append('<meta itemprop="thumbnail" content="'+F()+'" />'),$.getJSON("//gdata.youtube.com/feeds/api/videos/"+f+"?v=2&alt=jsonc&callback=?",function(e){c.append('<meta itemprop="datePublished" content="'+e.data.uploaded+'" />'),c.append('<meta itemprop="duration" content="'+e.data.duration+'" />'),c.append('<meta itemprop="aggregateRating" content="'+e.data.rating+'" />')})),c.attr("id",f+e),c.attr("href",b(f)+(z?"#t="+z+"s":"")),function W(){var e="",n="",o="",i="",a,r,c,s;l.theme!==t&&l.theme!==e&&"dark"!==l.theme&&(e="&theme="+l.theme),l.colour!==t&&l.colour!==n&&"red"!==l.colour&&(n="&color="+l.colour),a=l.showinfo?"":"&showinfo=0",r=l.relations?"":"&rel=0",c=l.controls?"":"&controls=0",s=l.loadpolicy?"":"&iv_load_policy=3",p=p!==f?f+",":"",l.postroll!==t&&l.postroll!==o&&(o=l.postroll),(""!==p||""!==o)&&(i="&playlist="+p+o),v+=(-1===v.indexOf("?")?"?":"&")+"autoplay=1"+e+n+c+s+a+r+i+j}();var O='<iframe width="'+parseInt(c.css("width"))+'" height="'+parseInt(c.css("height"))+'" style="vertical-align:top;" src="'+v+'" frameborder="0" allowfullscreen></iframe>';$(this).on("click",function(){return C(this),Q(this),$("#"+f+e).replaceWith(O),"function"==typeof d.resize&&l.responsive===!0&&d.resize(),!1});var C=function(e){$(e).removeClass(n)},Q=function(e){$(e).prev(i).remove()}})};$.fn.bindFirst=function(e,t){var n=$(this);n.unbind(e,t),n.bind(e,t);var o=$._data(n[0]).events,i=o[e];i.unshift(i.pop()),o[e]=i};var d={config:{container:$(".container-lazyload"),selector:"object, embed, iframe, .preview-lazyload, .lazy-load-youtube-div, .lazy-load-vimeo-div"},init:function(){d.config.container.length>0&&($(window).on("resize",d.resize),$(window).bindFirst("load",function(){d.resize()}),$(window).on("load",function(){d.resize()}))},resize:function(){$(d.config.selector,d.config.container).each(function(){var e=$(this),t=e.parent().width(),n=Math.round(t*a);e.attr("height",n),e.attr("width",t),e.css({height:n,width:t})})}};$(function(){e.init(lazyload_video_settings.youtube)})}(window.lazyload_youtube=window.lazyload_youtube||{},jQuery),function(e,$,t){function n(){y(),u(),p()}var o="preview-vimeo",i="."+o,a="lazyload-info-icon",r="."+a,l=.5625;e.init=function(e){s(e),$(document).ready(n()).ajaxStop(function(){n()}),"function"==typeof k.init&&c.responsive===!0&&k.init(),"function"==typeof c.callback&&c.callback()};var c,s=function(e){c=$.extend({buttonstyle:"",playercolour:"",videoseo:!1,responsive:!0,displayBranding:!1,callback:null},e)},d=function(){return'<a class="'+a+'" href="//kevinw.de/lazy-load-videos/" title="Lazy Load for Videos by Kevin Weber" target="_blank">i</a>'},u=function(){if(c.displayBranding===!0&&0===$(i).siblings(r).length){var e=$(i),t=$(d());e.before(t)}},p=function(){$(i).on("click",function(){var e=z(this);f(this),v(this);var t="";c.playercolour!==t&&(c.playercolour=m(c.playercolour),t="&color="+c.playercolour),$(this).html('<iframe src="'+h(e)+"?autoplay=1"+t+'" style="height:'+parseInt($("#"+e).css("height"))+'px;width:100%" frameborder="0" webkitAllowFullScreen mozallowfullscreen autoPlay allowFullScreen></iframe>'),"function"==typeof k.resize&&c.responsive===!0&&k.resize()})},f=function(e){$(e).removeClass(o)},v=function(e){$(e).prev(r).remove()},h=function(e){return"//player.vimeo.com/video/"+e},m=function(e){var t=e.toString().replace(/[.#]/g,"");return t},y=function(){$(i).each(function(){var e=z(this);$(this).empty(),b(e)})},b=function(e){var t=w(e)+".json?callback=showThumb",n=document.createElement("script");n.type="text/javascript",n.src=t;var o="";c.videoseo===!0&&(o=' itemprop="name"'),$("#"+e).prepend(n).prepend('<div style="height:'+parseInt($("#"+e).css("height"))+"px;width:"+parseInt($("#"+e).css("width"))+'px;" class="lazy-load-vimeo-div"><span class="titletext vimeo"'+o+"></span></div>").addClass(c.buttonstyle),g(e)},g=function(e){c.videoseo===!0&&$.getJSON(w(e)+"?callback=?",{format:"json"},function(t){$("#"+e).append('<meta itemprop="contentLocation" content="'+t[0].url+'" />'),$("#"+e).append('<meta itemprop="embedUrl" content="'+h(e)+'" />'),$("#"+e).append('<meta itemprop="thumbnail" content="'+t[0].thumbnail_large+'" />'),$("#"+e).append('<meta itemprop="datePublished" content="'+t[0].upload_date+'" />'),$("#"+e).append('<meta itemprop="duration" content="'+t[0].duration+'" />'),$("#"+e).append('<meta itemprop="aggregateRating" content="'+t.data.rating+'" />')})},w=function(e){return"//vimeo.com/api/v2/video/"+e+".json"},z=function(e){var t=$(e).attr("id");return t};$.fn.bindFirst=function(e,t){var n=$(this);n.unbind(e,t),n.bind(e,t);var o=$._data(n[0]).events,i=o[e];i.unshift(i.pop()),o[e]=i};var k={config:{container:$(".container-lazyload"),selector:"object, embed, iframe, .preview-lazyload, .lazy-load-youtube-div, .lazy-load-vimeo-div"},init:function(){k.config.container.length>0&&($(window).on("resize",k.resize),$(window).bindFirst("load",function(){k.resize()}),$(window).on("load",function(){k.resize()}))},resize:function(){$(k.config.selector,k.config.container).each(function(){var e=$(this),t=e.parent().width(),n=Math.round(t*l);e.attr("height",n),e.attr("width",t),e.css({height:n,width:t})})}};$(function(){e.init(lazyload_video_settings.vimeo)})}(window.lazyload_vimeo=window.lazyload_vimeo||{},jQuery);