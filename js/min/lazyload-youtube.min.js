!function(t,$,e){function i(t,e,i){this.testImplement=t,this.testParams=e,this.repititions=i||1e4,this.average=0}var n="preview-youtube",o="lazyload-info-icon",a="."+o,r=.5625,s="";t.init=function(t){c(t),$(document).ready(d()).ajaxStop(function(){d()}),"function"==typeof u.init&&l.responsive===!0&&u.init(),"function"==typeof l.callback&&l.callback()};var l,c=function(t){l=$.extend({theme:"dark",colour:"red",controls:!0,loadpolicy:!0,showinfo:!0,relations:!0,buttonstyle:"",preroll:"",postroll:"",videoseo:!1,responsive:!0,thumbnailquality:"0",displaybranding:!1,callback:null},t)},d=function(){$("a.lazy-load-youtube").each(function(t){var i=$(this),c=i.attr("href"),d,p="";!function F(){d=c.split("/embed/")[1],d||(d=c.split("://youtu.be/")[1]),d||(d=c.split("v=")[1].replace(/\&/,"?"))}();var f=d.split("?")[0].split("#")[0];!function M(){p=l.preroll!==e&&l.preroll!==p?l.preroll:d}();var h="//www.youtube.com/embed/"+p,v=function(){return'<a class="'+o+'" href="http://kevinw.de/lazy-load-videos/" title="Lazy Load for Videos by Kevin Weber" target="_blank">i</a>'},m=function(){if(l.displaybranding===!0&&0===i.siblings(a).length){var t=i,e=$(v());t.before(e)}};m();var y=function(){return i.attr("video-title")!==e?i.attr("video-title"):i.html()!==e&&""!==i.html()?i.html():""},b=function(t){return"//www.youtube.com/watch?v="+t},g=function(t){var e=parseInt(t.css("width"))-4;return e},w=function(t){var e=0;if(l.responsive===!1)e=parseInt(t.css("height"))-4;else{var i=g(t);e=Math.round(i*r)}return e},z=0,k=[3600,60,1],x=d.match(/[#&?]t=(?:(\d+)(?:h))?(?:(\d+)(?:m))?(?:(\d+)(?:s))?/);if(x)for(var _=1;_<x.length;_++)"undefined"!=typeof x[_]&&(z+=parseInt(x[_])*k[_-1]);0===z&&(x=d.match(/[#&?](?:t|start)=(\d+)/),x&&(z=x[1])),d=d.split("#")[0];var I="";z&&0!==z&&-1===d.indexOf("start=")&&(I=(-1===d.indexOf("?")?"?":"&")+"start="+z);var j="";l.videoseo===!0&&(j=' itemprop="name"'),i.html(-1!==d.indexOf("showinfo=0")?"":'<div class="lazy-load-youtube-info"><span class="titletext youtube"'+j+">"+y()+"</span></div>"),i.prepend('<div style="height:'+w(i)+"px;width:"+g(i)+'px;" class="lazy-load-youtube-div"></div>').addClass(l.buttonstyle);var O=function(t){var e="//i2.ytimg.com/vi/"+t+"/"+l.thumbnailquality+".jpg";s=e};O(f);var L=function(){return s},P=function(t){var e=L(),i=$('<img style="display:none" src="'+e+'"/>');i.load(function(){120===i.width()&&(e=e.replace("maxresdefault","0")),"none"===t.css("background-image")&&t.css("background","#000 url("+e+") center center no-repeat"),i.remove()}),$("body").append(i)};P(i),l.videoseo===!0&&(i.append('<meta itemprop="contentLocation" content="'+b(f)+'" />'),i.append('<meta itemprop="embedUrl" content="'+h+'" />'),i.append('<meta itemprop="thumbnail" content="'+L()+'" />'),$.getJSON("http://gdata.youtube.com/feeds/api/videos/"+f+"?v=2&alt=jsonc&callback=?",function(t){i.append('<meta itemprop="datePublished" content="'+t.data.uploaded+'" />'),i.append('<meta itemprop="duration" content="'+t.data.duration+'" />'),i.append('<meta itemprop="aggregateRating" content="'+t.data.rating+'" />')})),i.attr("id",f+t),i.attr("href",b(f)+(z?"#t="+z+"s":"")),function S(){var t="",i="",n="",o="",a,r,s,c;l.theme!==e&&l.theme!==t&&"dark"!==l.theme&&(t="&theme="+l.theme),l.colour!==e&&l.colour!==i&&"red"!==l.colour&&(i="&color="+l.colour),a=l.showinfo?"":"&showinfo=0",r=l.relations?"":"&rel=0",s=l.controls?"":"&controls=0",c=l.loadpolicy?"":"&iv_load_policy=3",p=p!==f?f+",":"",l.postroll!==e&&l.postroll!==n&&(n=l.postroll),(""!==p||""!==n)&&(o="&playlist="+p+n),h+=(-1===h.indexOf("?")?"?":"&")+"autoplay=1"+t+i+s+c+a+r+o+I}();var q='<iframe width="'+parseInt(i.css("width"))+'" height="'+parseInt(i.css("height"))+'" style="vertical-align:top;" src="'+h+'" frameborder="0" allowfullscreen></iframe>';$(this).on("click",function(){return C(this),D(this),$("#"+f+t).replaceWith(q),"function"==typeof u.resize&&l.responsive===!0&&u.resize(),!1});var C=function(t){$(t).removeClass(n)},D=function(t){$(t).prev(a).remove()}})};$.fn.bindFirst=function(t,e){var i=$(this);i.unbind(t,e),i.bind(t,e);var n=$._data(i[0]).events,o=n[t];o.unshift(o.pop()),n[t]=o};var u={config:{container:$(".container-lazyload"),selector:"object, embed, iframe, .preview-lazyload, .lazy-load-youtube-div, .lazy-load-vimeo-div"},init:function(){u.config.container.length>0&&($(window).on("resize",u.resize),$(window).bindFirst("load",function(){u.resize()}),$(window).on("load",function(){u.resize()}))},resize:function(){$(u.config.selector,u.config.container).each(function(){var t=$(this),e=t.parent().width(),i=Math.round(e*r);t.attr("height",i),t.attr("width",e),t.css({height:i,width:e})})}};$(function(){t.init(lazyload_video_settings.youtube)}),i.prototype={startTest:function(){for(var t,e,i=0,n=0,o=this.repititions;o>n;n++)t=+new Date,this.testImplement(this.testParams),e=+new Date,i+=e-t;return this.average=i/this.repititions,console.log("Average execution across "+this.repititions+": "+this.average)}}}(window.lazyload_youtube=window.lazyload_youtube||{},jQuery);